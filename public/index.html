<html>
  <head>
    <title>Welcome to Feathers</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }



      html, body {
        font-family: 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif';
        font-weight: 400;
        font-size: 16px;
        color: #333;
      }

      body {
        padding: 1em;
      }

      .center-text {
        text-align: center;
      }

      a {
        color: #31D8A0;
        text-decoration: none;
      }


      .two-cols {
        width: 50%;
        float: left;
      }

      a:hover,
      a:focus {
        color: #31D8A0;
      }


      #dartboard {
        max-width: 100%;
      }

      #dartboard #areas g {
        cursor: pointer;
      }

      @media screen and (max-width: 1000px) {
        .two-cols {
          width: 100%;
        }
      }

      .results-table {
        width: 100%;
      }

      .results-column {
        width: 50%;
        float: left;
        border: 1px solid black;
        text-align: center;

        box-sizing: border-box;
      }

      .results-cell {
        width: 100%;
        padding: 0.5em;
        border-top: 1px solid black;
      }

      .player-name {
        padding: 0.5rem;
      }

      .player-name.active {
        background: red;
        color: white;
      }


    </style>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="//cdn.rawgit.com/feathersjs/feathers-client/v1.1.0/dist/feathers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.21/vue.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.3.js"></script>
  </head>
  <body>
  <div id="app">


<div class="two-cols">
    <h1>Darts!</h1>

    <div class="setup" v-show="!game_started">
      <h2>Game mode</h2>
      <select name="gamemode" v-model="starting_point">
        <option value="101">101</option>
        <option value="201">201</option>
        <option value="301">301</option>
        <option value="401">401</option>
        <option value="501">501</option>
      </select>
      <h2>Players</h2>
      <input type="text" placeholder="Player One" v-model="player_one_name"> Vs <input type="text" placeholder="Player Two" v-model="player_two_name" @keydown.enter="createGame">
      <button type="submit" @click.prevent="createGame">Start!</button>
    </div>

    <div class="scoreboard" v-show="game_started">
      <h3>Current Match: {{ starting_point }} : Round {{round}}</h3>
      <h1 v-if="!game_finished">Shots left: {{shots}}</h1>
      <h1 v-if="game_finished">{{message}}</h1>
      <a href="#" @click.prevent="swapCurrentPlayer">Swap</a>
      <!-- <h2 v-for="player in players">{{player.name}} - {{player.score}}</h2> -->

      <div class="results-table">
        <div class="results-column" v-for="player in players">
          <div class="player-name" v-bind:class="$index == current_player ? 'active' : ''"><h2>{{player.name}}: <b>{{player.score}}</b></h2></div>
          <div class="results-cell" v-for="shot in player.history"><b>{{shot}}</b></div>
        </div>
      </div>

    </div>



    <!-- {{ current_round  | json }} -->
</div>
<div class="two-cols" v-show="game_started">

<svg version="1.1" id="dartboard" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 813.4 800" style="enable-background:new 0 0 813.4 800;" xml:space="preserve">
<style type="text/css">
  .st0{fill:#F7E9CD;}
  .st1{fill:#ED3737;}
  .st2{fill:#4F9962;}
  .st3{fill:#FFFFFF;}
  .st4{fill:#404040;}
</style>
<g>
  <g id="areas">
    <g id="outer">
      <circle id="Missed" cx="404.9" cy="400.9" r="395.3"/>
    </g>
    <circle class="st4" cx="406.7" cy="400" r="330.3"/>

    <g id="s">
      <path id="s19" class="st0" d="M333.2,573c-2-0.8-3.9-1.7-5.8-2.6l66.1-138.9c2,0.8,4.2,1.5,6.4,1.9l-20,152.5
        C363.8,583.7,348.2,579.4,333.2,573L333.2,573z M363.9,708l13.4-102.2c-17.8-2.5-35.2-7.3-51.9-14.3c-2.2-0.9-4.4-1.9-6.6-2.9
        l-44.3,93.1c3.6,1.7,7.2,3.3,10.8,4.8C310.5,697.2,336.9,704.4,363.9,708L363.9,708z"/>
      <path id="s14" d="M220.4,373.7c2.2-16.1,6.6-31.7,12.9-46.7c0.8-2,1.7-3.9,2.6-5.8l138.9,66.1c-0.8,2-1.5,4.2-1.9,6.4
        L220.4,373.7z M98.3,357.8l102.2,13.4c2.5-17.8,7.3-35.2,14.3-51.9c0.9-2.2,1.9-4.4,2.9-6.6l-93.1-44.3
        c-1.7,3.6-3.3,7.1-4.8,10.8C109.1,304.4,101.9,330.8,98.3,357.8L98.3,357.8z"/>
      <path id="s4" class="st0" d="M538.9,267.4c12.4,12.4,22.8,26.2,31.2,41.2L435,382.1c-1.2-1.9-2.5-3.6-4.1-5.3l105.8-111.7
        C537.4,266,538.2,266.7,538.9,267.4L538.9,267.4z M626,180.3c-1.5-1.5-3.1-3-4.6-4.5l-70.9,74.9c0.9,0.8,1.7,1.7,2.6,2.5
        c13.7,13.7,25.3,29.1,34.6,45.8l90.6-49.3C664.2,224.4,646.7,201.1,626,180.3L626,180.3z"/>
      <path id="s16" class="st0" d="M273.5,532.8c-12.4-12.4-22.8-26.2-31.2-41.2L377.4,418c1.2,1.9,2.5,3.6,4.1,5.3L275.8,534.9
        C275,534.2,274.2,533.5,273.5,532.8L273.5,532.8z M191,624.3l70.9-74.9c-0.9-0.8-1.7-1.7-2.6-2.5c-13.7-13.7-25.3-29.1-34.6-45.8
        l-90.6,49.3c14,25.4,31.5,48.7,52.3,69.4C188,621.4,189.5,622.9,191,624.3L191,624.3z"/>
      <path id="s9" class="st0" d="M237.6,317.6c8.1-16.5,18.5-31.6,31-45.1l111.7,105.8c-1.4,1.7-2.7,3.5-3.8,5.5L237.6,317.6z
         M219.5,309c9-18.4,20.6-35.2,34.6-50.3l-74.8-70.9c-21.5,23-39.2,48.7-52.8,76.9L219.5,309z"/>
      <path id="s7" d="M323.7,568.7c-16.5-8.1-31.6-18.5-45.1-31L384.4,426c1.7,1.4,3.5,2.7,5.5,3.8L323.7,568.7z M315.1,586.8
        c-18.4-9-35.2-20.6-50.3-34.6L193.9,627c23,21.5,48.7,39.2,76.9,52.8L315.1,586.8z"/>
      <path id="s8" d="M233.3,473.1c-5-11.9-8.8-24.2-11.2-36.7l151.2-28.2c0.5,2.2,1.3,4.3,2.2,6.3L240.3,488
        C237.8,483.2,235.4,478.2,233.3,473.1L233.3,473.1z M132.2,546.9l90.6-49.3c-2.9-5.4-5.5-11-8-16.7c-5.6-13.2-9.7-26.9-12.5-40.8
        L101,459c4.1,21.2,10.3,42,18.8,62.1C123.6,529.9,127.7,538.5,132.2,546.9L132.2,546.9z"/>
      <path id="s12" d="M273.5,267.4c12.4-12.4,26.2-22.8,41.2-31.2l73.5,135.1c-1.9,1.2-3.6,2.5-5.3,4.1L271.3,269.5
        C272.1,268.9,272.8,268.1,273.5,267.4L273.5,267.4z M182,184.9l74.9,70.9c0.8-0.9,1.7-1.7,2.5-2.6c13.7-13.7,29.1-25.3,45.8-34.6
        l-49.3-90.6c-25.4,14-48.7,31.5-69.4,52.3C184.9,181.9,183.4,183.4,182,184.9L182,184.9z"/>
      <path id="s1" class="st0" d="M485,229.7l-66.1,138.9c-2-0.8-4.2-1.5-6.4-1.9l19.9-152.5c16.1,2.2,31.7,6.6,46.7,12.9
        C481.2,228,483.1,228.9,485,229.7L485,229.7z M448.5,92.1l-13.4,102.2c17.8,2.5,35.2,7.3,51.9,14.3c2.2,0.9,4.4,1.9,6.6,2.9
        l44.3-93.1c-3.6-1.7-7.2-3.3-10.8-4.8C501.9,103,475.5,95.8,448.5,92.1L448.5,92.1z"/>
      <path id="s18" d="M488.7,231.4c16.5,8.1,31.6,18.5,45.1,31L428,374.1c-1.7-1.4-3.5-2.7-5.5-3.8L488.7,231.4z M497.3,213.3
        c18.4,9,35.2,20.6,50.3,34.6l70.9-74.8c-23-21.5-48.7-39.2-76.9-52.8L497.3,213.3z"/>
      <path id="s20" d="M406.2,212.4c7.5,0,15,0.4,22.3,1.3l-19.9,152.5c-0.8-0.1-1.6-0.1-2.4-0.1c-1.4,0-2.8,0.1-4.2,0.3l-28.2-151.2
        C384.4,213.4,395.2,212.4,406.2,212.4z M351.2,94.1l18.9,101.4c11.8-2.1,23.9-3.1,36.1-3.1c8.4,0,16.7,0.5,24.9,1.5l13.4-102.2
        c-12.6-1.5-25.4-2.3-38.3-2.3C387.6,89.3,369.3,90.9,351.2,94.1L351.2,94.1z"/>
      <path id="s5" class="st0" d="M333.2,227.1c11.9-5,24.2-8.8,36.7-11.2L398,367.1c-2.2,0.5-4.3,1.3-6.3,2.2l-73.5-135.1
        C323.1,231.7,328.1,229.3,333.2,227.1L333.2,227.1z M259.4,126.1l49.3,90.6c5.4-2.9,11-5.5,16.7-8c13.2-5.6,26.9-9.7,40.8-12.5
        L347.3,94.9c-21.2,4.1-42,10.3-62.1,18.8C276.4,117.5,267.8,121.6,259.4,126.1L259.4,126.1z"/>
      <path id="s3" d="M406.2,587.7c-7.5,0-15-0.4-22.3-1.3l19.9-152.5c0.8,0.1,1.6,0.1,2.4,0.1c1.4,0,2.8-0.1,4.2-0.3L438.6,585
        C428,586.8,417.2,587.8,406.2,587.7z M461.1,706l-18.9-101.4c-11.8,2.1-23.9,3.1-36.1,3.1c-8.4,0-16.7-0.5-24.9-1.5l-13.4,102.2
        c12.6,1.5,25.4,2.3,38.3,2.3C424.8,710.9,443.1,709.3,461.1,706L461.1,706z"/>
      <path id="s10" d="M592,426.4c-2.2,16.1-6.6,31.7-12.9,46.7c-0.8,2-1.7,3.9-2.6,5.8l-138.9-66.1c0.8-2,1.5-4.2,1.9-6.4L592,426.4z
         M714.1,442.3L611.9,429c-2.5,17.8-7.3,35.2-14.3,51.9c-0.9,2.2-1.9,4.4-2.9,6.6l93.1,44.3c1.7-3.6,3.3-7.2,4.8-10.8
        C703.3,495.8,710.5,469.4,714.1,442.3L714.1,442.3z"/>
      <path id="s17" class="st0" d="M479.3,573c-11.9,5-24.2,8.8-36.7,11.2L414.4,433c2.2-0.5,4.3-1.3,6.3-2.2l73.5,135.1
        C489.3,568.5,484.3,570.9,479.3,573L479.3,573z M553,674.1l-49.3-90.6c-5.4,2.9-11,5.5-16.7,8c-13.2,5.6-26.9,9.7-40.8,12.5
        l18.9,101.4c21.2-4.1,42-10.4,62.1-18.8C536,682.7,544.6,678.6,553,674.1L553,674.1z"/>
      <path id="s13" d="M579.1,327c5,11.9,8.8,24.2,11.2,36.7l-151.2,28.2c-0.5-2.2-1.3-4.3-2.2-6.3L572,312.1
        C574.6,317,577,322,579.1,327L579.1,327z M680.2,253.2l-90.6,49.3c2.9,5.4,5.5,11,8,16.7c5.6,13.2,9.7,26.9,12.5,40.8l101.4-18.9
        c-4.1-21.2-10.4-42-18.8-62.1C688.8,270.3,684.7,261.7,680.2,253.2L680.2,253.2z"/>
      <path id="s2" d="M538.9,532.8c-12.4,12.4-26.2,22.8-41.2,31.2l-73.5-135.1c1.9-1.2,3.6-2.5,5.3-4.1l111.7,105.8
        C540.3,531.3,539.6,532.1,538.9,532.8L538.9,532.8z M630.4,615.2l-74.9-70.9c-0.8,0.9-1.7,1.7-2.5,2.6
        c-13.7,13.7-29.1,25.3-45.8,34.6l49.3,90.6c25.4-14,48.7-31.5,69.4-52.3C627.5,618.3,629,616.8,630.4,615.2L630.4,615.2z"/>
      <path id="s6" class="st0" d="M439.9,395.8l151.2-28.2c1.8,10.6,2.8,21.4,2.8,32.4c0,7.5-0.4,15-1.3,22.3l-152.5-19.9
        c0.1-0.8,0.1-1.6,0.1-2.4C440.1,398.7,440,397.3,439.9,395.8L439.9,395.8z M610.8,364c2.1,11.8,3.1,23.9,3.1,36.1
        c0,8.4-0.5,16.7-1.5,24.9l102.3,13.4c1.5-12.6,2.3-25.4,2.3-38.3c0-18.6-1.6-37-4.8-55L610.8,364z"/>
      <path id="s11" class="st0" d="M100.2,455c-3.2-18-4.8-36.4-4.8-55c0-12.9,0.8-25.7,2.3-38.3L200,375.1c-1,8.2-1.5,16.5-1.5,24.9
        c0,12.2,1,24.2,3.1,36.1L100.2,455z M372.3,400.1c0-0.8,0-1.6,0.1-2.4l-152.5-19.9c-0.9,7.4-1.3,14.8-1.3,22.3
        c0,11,0.9,21.8,2.8,32.4l151.2-28.2C372.4,402.9,372.3,401.5,372.3,400.1L372.3,400.1z"/>
      <path id="s15" class="st0" d="M574.8,482.5c-8.1,16.5-18.5,31.6-31,45.1L432.2,421.9c1.4-1.7,2.7-3.5,3.8-5.5L574.8,482.5z
         M592.9,491.1c-9,18.4-20.6,35.2-34.6,50.3l74.8,70.9c21.5-23,39.2-48.7,52.8-76.9L592.9,491.1z"/>
    </g>
    <g id="d">
      <path id="d2" class="st1" d="M628.1,621.9c-21,21-44.5,38.7-70.1,52.8l7.5,13.8c30.7-16.9,54.4-35.1,78.6-60.4l-11.5-10.9
        C631.1,618.9,629.6,620.4,628.1,621.9L628.1,621.9z"/>
      <path id="d17" class="st2" d="M528.3,689.2c-20.3,8.6-41.3,14.9-62.7,19l2.9,15.5c34.4-6.6,62.6-16.6,93.5-33.2l-7.5-13.8
        C546,681.3,537.3,685.5,528.3,689.2L528.3,689.2z"/>
      <path id="d15" class="st2" d="M635.4,614.4l11.5,10.9c24-25.6,40.9-50.2,56.1-81.8l-14.2-6.8C675,565.2,657.1,591.2,635.4,614.4
        L635.4,614.4z"/>
      <path id="d6" class="st2" d="M730.6,341.7l-15.5,2.9c3.2,18.2,4.9,36.7,4.9,55.5c0,13-0.8,25.9-2.4,38.7l15.6,2
        C737.6,406.1,736.8,376.2,730.6,341.7L730.6,341.7z"/>
      <path id="d14" class="st1" d="M117.1,277.9c1.6-3.7,3.2-7.3,4.9-10.9l-14.2-6.8c-14.9,31.7-23.4,60.4-28.1,95.1l15.7,2
        C99,330.1,106.3,303.5,117.1,277.9L117.1,277.9z"/>
      <path id="d10" class="st1" d="M695.3,522.2c-1.6,3.7-3.2,7.3-4.9,10.9l14.2,6.8c14.9-31.7,23.4-60.4,28.1-95.1l-15.7-2
        C713.4,470.1,706.1,496.7,695.3,522.2L695.3,522.2z"/>
      <path id="d11" class="st2" d="M92.4,400.1c0-13,0.8-25.9,2.4-38.7l-15.6-2c-4.4,34.8-3.6,64.7,2.7,99.1l15.5-2.9
        C94.1,437.4,92.4,418.9,92.4,400.1L92.4,400.1z"/>
      <path id="d19_1_" class="st2" d="M284.1,689.2c-3.7-1.6-7.3-3.2-10.9-4.9l-6.8,14.2c31.7,14.9,60.4,23.4,95.1,28.1l2-15.7
        C336.2,707.3,309.6,700,284.1,689.2L284.1,689.2z"/>
      <path id="d8" class="st1" d="M117.1,522.2c-8.6-20.3-14.9-41.2-19-62.7l-15.5,2.9c6.6,34.4,16.6,62.6,33.2,93.5l13.8-7.5
        C125,539.9,120.8,531.2,117.1,522.2L117.1,522.2z"/>
      <path id="d16" class="st2" d="M184.3,621.9c-21-21-38.7-44.5-52.8-70.1l-13.8,7.5c16.9,30.7,35.1,54.4,60.4,78.6l10.9-11.5
        C187.4,625,185.9,623.5,184.3,621.9L184.3,621.9z"/>
      <path id="d7" class="st1" d="M191.9,629.2L181,640.7c25.6,24,50.2,40.9,81.8,56.1l6.8-14.2C241.1,668.9,215.1,651,191.9,629.2
        L191.9,629.2z"/>
      <path id="d3" class="st1" d="M406.2,713.8c-13,0-25.9-0.8-38.7-2.4l-2.1,15.7c14.6,1.8,28.2,2.8,41.6,2.8c0,0,0,0,0,0
        c18.6,0,37.4-1.8,57.5-5.5l-2.9-15.6C443.5,712.2,425,713.9,406.2,713.8z"/>
      <path id="d1" class="st2" d="M528.3,110.9c3.7,1.6,7.3,3.2,10.9,4.9l6.8-14.2c-31.7-14.9-60.4-23.4-95.1-28.1l-2,15.7
        C476.2,92.9,502.8,100.2,528.3,110.9L528.3,110.9z"/>
      <path id="d20" class="st1" d="M406.2,86.3c13,0,25.9,0.8,38.7,2.4l2-15.6c-14.6-1.8-28.2-2.7-41.6-2.7c-18.6,0-37.4,1.8-57.5,5.4
        l2.9,15.5C368.9,88,387.4,86.3,406.2,86.3z"/>
      <path id="d18" class="st1" d="M620.5,170.9l10.9-11.5c-25.6-24-50.2-40.9-81.8-56.1l-6.8,14.2
        C571.3,131.3,597.3,149.2,620.5,170.9L620.5,170.9z"/>
      <path id="d5" class="st2" d="M284.1,110.9c20.3-8.6,41.3-14.9,62.7-19l-2.9-15.5c-34.4,6.6-62.6,16.6-93.5,33.2l7.5,13.8
        C266.4,118.9,275.1,114.7,284.1,110.9L284.1,110.9z"/>
      <path id="d12" class="st1" d="M184.3,178.2c21-21,44.5-38.7,70.1-52.8l-7.5-13.8c-30.7,16.9-54.4,35.1-78.6,60.4l11.5,10.9
        C181.3,181.3,182.8,179.8,184.3,178.2L184.3,178.2z"/>
      <path id="d9" class="st2" d="M177,185.7l-11.5-10.9c-24,25.6-40.9,50.2-56.1,81.8l14.2,6.8C137.4,235,155.3,209,177,185.7
        L177,185.7z"/>
      <path id="d4" class="st2" d="M628.1,178.2c21,21,38.7,44.5,52.8,70.1l13.8-7.5c-16.9-30.7-35.1-54.4-60.4-78.6l-10.9,11.5
        C625,175.2,626.5,176.7,628.1,178.2L628.1,178.2z"/>
      <path id="d13" class="st1" d="M695.3,277.9c8.6,20.3,14.9,41.3,19,62.7l15.5-2.9c-6.6-34.4-16.6-62.6-33.2-93.5l-13.8,7.5
        C687.4,260.3,691.6,269,695.3,277.9L695.3,277.9z"/>
    </g>
    <g id="t">
      <path id="t10" class="st1" d="M608.9,428.6l-13.9-1.8c-2.3,16.3-6.7,32.2-13.1,47.5c-0.8,2-1.7,4-2.6,5.9l12.7,6
        c1-2.1,2-4.3,2.9-6.5C601.8,463.3,606.5,446.2,608.9,428.6L608.9,428.6z"/>
      <path id="t13" class="st1" d="M587,304l-12.3,6.7c2.6,4.9,5,10,7.2,15.2c5.1,12.1,8.9,24.6,11.4,37.3l13.8-2.6
        c-2.7-13.8-6.8-27.2-12.3-40.2C592.4,314.8,589.8,309.3,587,304L587,304z"/>
      <path id="t3" class="st1" d="M441.7,601.7l-2.6-13.8c-10.8,1.9-21.8,2.8-32.9,2.8c-7.6,0-15.2-0.5-22.7-1.3l-1.8,13.9
        c8.1,1,16.3,1.5,24.5,1.5C418.2,604.8,430.1,603.8,441.7,601.7L441.7,601.7z"/>
      <path id="t2" class="st1" d="M553.4,542.3l-10.2-9.6c-0.7,0.8-1.5,1.5-2.2,2.3c-12.6,12.6-26.6,23.2-41.9,31.7l6.7,12.3
        c16.5-9.2,31.6-20.6,45.1-34.1C551.8,544,552.6,543.2,553.4,542.3L553.4,542.3z"/>
      <path id="t8" class="st1" d="M225.4,496.1l12.3-6.7c-2.6-4.9-5-10-7.2-15.2c-5.1-12.1-8.9-24.6-11.4-37.3l-13.8,2.6
        c2.7,13.8,6.8,27.2,12.3,40.2C220,485.4,222.6,490.9,225.4,496.1L225.4,496.1z"/>
      <path id="t14" class="st1" d="M203.5,371.5l13.9,1.8c2.3-16.3,6.7-32.2,13.1-47.5c0.8-2,1.7-4,2.6-5.9l-12.7-6
        c-1,2.1-2,4.3-2.9,6.5C210.6,336.9,205.9,354,203.5,371.5L203.5,371.5z"/>
      <path id="t7" class="st1" d="M322.5,571.4c-16.8-8.2-32.2-18.8-45.9-31.5l-9.6,10.2c14.8,13.8,31.4,25.2,49.5,34L322.5,571.4z"/>
      <path id="t9" class="st2" d="M234.9,316.3c8.2-16.8,18.8-32.2,31.5-45.9l-10.2-9.6c-13.8,14.8-25.2,31.4-34,49.5L234.9,316.3z"/>
      <path id="t4" class="st2" d="M548.4,252.8l-9.6,10.2c0.8,0.7,1.5,1.5,2.3,2.2c12.6,12.6,23.2,26.6,31.7,41.9l12.3-6.7
        c-9.2-16.5-20.6-31.6-34.1-45.1C550.1,254.5,549.2,253.7,548.4,252.8L548.4,252.8z"/>
      <path id="t17" class="st2" d="M502.3,580.8l-6.7-12.3c-4.9,2.6-10,5-15.2,7.2c-12.1,5.1-24.6,8.9-37.3,11.4l2.6,13.8
        c13.8-2.7,27.2-6.8,40.2-12.3C491.5,586.3,497,583.7,502.3,580.8L502.3,580.8z"/>
      <path id="t15" class="st2" d="M577.5,483.8c-8.2,16.8-18.8,32.2-31.5,45.9l10.2,9.6c13.8-14.8,25.2-31.4,34-49.5L577.5,483.8z"/>
      <path id="t18" class="st1" d="M496,216.1l-6,12.7c16.8,8.2,32.2,18.8,45.9,31.5l9.6-10.2C530.7,236.3,514.1,224.9,496,216.1
        L496,216.1z"/>
      <path id="t20" class="st1" d="M370.7,198.4l2.6,13.8c10.8-1.9,21.8-2.8,33-2.8c7.7,0,15.2,0.5,22.7,1.3l1.8-13.9
        c-8.1-1-16.3-1.5-24.6-1.5C394.2,195.4,382.3,196.4,370.7,198.4L370.7,198.4z"/>
      <path id="t5" class="st2" d="M310.1,219.3l6.7,12.3c4.9-2.6,10-5,15.2-7.2c12.1-5.1,24.6-8.9,37.3-11.4l-2.6-13.8
        c-13.8,2.7-27.2,6.8-40.2,12.3C320.9,213.9,315.4,216.5,310.1,219.3L310.1,219.3z"/>
      <path id="t1" class="st2" d="M434.7,197.3l-1.8,13.9c16.3,2.3,32.2,6.7,47.5,13.1c2,0.8,4,1.7,5.9,2.6l6-12.7
        c-2.1-1-4.3-2-6.5-2.9C469.4,204.5,452.3,199.8,434.7,197.3L434.7,197.3z"/>
      <path id="t12" class="st1" d="M259,257.9l10.2,9.6c0.7-0.8,1.5-1.5,2.2-2.3c12.6-12.6,26.6-23.2,41.9-31.7l-6.7-12.3
        c-16.5,9.2-31.6,20.6-45.1,34.1C260.6,256.2,259.8,257,259,257.9L259,257.9z"/>
      <path id="t6" class="st2" d="M594,367.1c1.9,10.8,2.8,21.8,2.8,33c0,7.7-0.5,15.2-1.3,22.7l13.9,1.8c1-8.1,1.5-16.3,1.5-24.6
        c0-12-1-23.9-3.1-35.5L594,367.1z"/>
      <path id="t11" class="st2" d="M218.4,433c-1.9-10.8-2.8-21.8-2.8-33c0-7.7,0.5-15.2,1.3-22.7l-13.9-1.8c-1,8.1-1.5,16.3-1.5,24.6
        c0,12,1,23.9,3.1,35.5L218.4,433z"/>
      <path id="t19" class="st2" d="M377.7,602.8l1.8-13.9c-16.3-2.3-32.2-6.7-47.5-13.1c-2-0.8-4-1.7-5.9-2.6l-6,12.7
        c2.1,1,4.3,2,6.5,2.9C343,595.7,360.1,600.4,377.7,602.8L377.7,602.8z"/>
      <path id="t16" class="st2" d="M264,547.3l9.6-10.2c-0.8-0.7-1.5-1.5-2.3-2.2c-12.6-12.6-23.2-26.6-31.7-41.9l-12.3,6.7
        c9.2,16.5,20.6,31.6,34.1,45.1C262.3,545.7,263.1,546.5,264,547.3L264,547.3z"/>
    </g>
    <g id="bull">
      <path id="Outer" class="st2" d="M437.6,400.1c0,17.1-13.9,30.9-30.9,30.9s-30.9-13.8-30.9-30.9s13.9-30.9,30.9-30.9
        S437.6,383,437.6,400.1L437.6,400.1z M406.7,383.7c-9.1,0-16.4,7.3-16.4,16.4s7.3,16.4,16.4,16.4s16.4-7.3,16.4-16.4
        S415.8,383.7,406.7,383.7z"/>
      <circle id="Bull" class="st1" cx="406.7" cy="400.1" r="13.7"/>
    </g>
  </g>
  <g id="score">
    <path id="score_1_" class="st3" d="M377,45l8.8-6.7c2.2-1.7,3-2.8,3-4.2c0-1.5-1-2.4-2.6-2.4s-2.8,0.9-4.7,3l-4.4-3.7
      c2.5-3.3,5-5.1,9.6-5.1c5.2,0,8.7,3.1,8.7,7.5v0.1c0,3.8-2,5.7-5.5,8.3l-4,2.8h9.7v5.3H377L377,45L377,45z M398.3,38.1L398.3,38.1
      c0-6.7,4.2-12.3,11-12.3s10.9,5.5,10.9,12.2v0.1c0,6.7-4.2,12.3-11,12.3C402.4,50.4,398.3,44.9,398.3,38.1L398.3,38.1z
       M413.6,38.1L413.6,38.1c0-3.8-1.8-6.5-4.4-6.5s-4.3,2.6-4.3,6.4v0.1c0,3.8,1.8,6.5,4.4,6.5C411.9,44.6,413.6,41.9,413.6,38.1
      L413.6,38.1z M281.6,69l2.2-5.3c2.3,1,4.3,1.3,6.2,0.7c2.1-0.7,3-2.1,2.5-3.7l0-0.1c-0.5-1.6-2.2-2.2-4.1-1.5
      c-1.4,0.4-2.4,1.3-3.2,2.3l-4.4-0.9l-3-11.6l15-4.8l1.6,5.1l-10.1,3.2l0.9,3.5c0.9-0.8,1.8-1.5,3.3-2c4-1.3,8.4-0.2,10,4.7l0,0.1
      c1.6,5-1.3,9.2-6.7,11C287.9,71,284.7,70.5,281.6,69L281.6,69z M176.3,112.6l-2.7,3.1l-4-3.4l4.5-5.6l3.9-2.8l13.8,19.3l-5.2,3.7
      L176.3,112.6z M191.8,117.2l3.3-10.6c0.8-2.7,0.8-4.1,0-5.2c-0.9-1.2-2.2-1.3-3.5-0.4s-1.8,2.4-2,5.2l-5.7-0.4
      c0.2-4.1,1.1-7,4.9-9.7c4.2-3,8.9-2.6,11.5,1.1l0,0.1c2.2,3.1,1.7,5.8,0.4,9.9l-1.6,4.7l7.9-5.7l3.1,4.3l-15.2,10.9L191.8,117.2z
       M113.5,203.6l-1.8-5.2c2-0.5,3.4-1.4,4.5-2.9c1.6-2.2,1-4.5-1.3-6.5c0.2,1.7-0.2,3.5-1.4,5.2c-2.7,3.7-7,4.7-10.7,1.9l-0.1,0
      c-4.2-3.1-4.5-8.4-1.3-12.7c2.1-2.8,4-3.8,6.5-4.2c2.4-0.4,5.2,0.3,8.7,2.9h0.1c6.2,4.6,8.1,10.8,3.9,16.5
      C118.5,201.6,116.1,202.9,113.5,203.6L113.5,203.6z M110.3,185.5L110.3,185.5c-1.5-1.1-3.4-0.9-4.6,0.8c-1.2,1.6-0.9,3.5,0.6,4.5
      l0.1,0c1.4,1.1,3.3,0.8,4.5-0.9S111.7,186.5,110.3,185.5L110.3,185.5z M51.7,301.3l-0.4,4.1l-5.2-0.5l0.4-7.2l1.5-4.5l22.5,7.7
      l-2.1,6.1L51.7,301.3z M71.1,285l-3.7,10.8l-4.7-0.5L52.9,279l2.1-6.3l13.5,4.6l1-2.8l4.6,1.6l-1,2.8l4.3,1.5l-2,6L71.1,285z
       M66.5,283.4l-6.4-2.2l4.6,7.5L66.5,283.4z M38.6,410l0.8,4l-5.1,1.2l-1.8-6.9l0.1-4.8l23.8,0.4l-0.1,6.4L38.6,410L38.6,410z
       M38.9,395.7l0.8,4l-5.1,1.2l-1.8-6.9l0.1-4.8l23.8,0.4l-0.1,6.4L38.9,395.7z M70.2,519.6L70.2,519.6c-2.8,0.8-4.9-0.1-6.7-2.2
      c-0.4,2-1.5,3.8-4,4.6l-0.1,0c-3.6,1.1-7.3-1.6-8.9-6.6c-1.5-5.1,0.1-9.3,3.7-10.4l0.1,0c2.5-0.7,4.3,0.2,5.8,1.6
      c0.4-2.6,1.4-4.7,4.2-5.5l0.1,0c4-1.2,7.8,1.9,9.4,7.3C75.6,513.8,74.1,518.5,70.2,519.6L70.2,519.6z M56.9,510.5L56.9,510.5
      c-1.3,0.4-2.1,1.8-1.6,3.5c0.5,1.7,1.9,2.4,3.2,2.1l0.1,0c1.4-0.4,2.2-1.8,1.7-3.5C59.7,510.9,58.3,510.1,56.9,510.5L56.9,510.5z
       M65.8,507.3L65.8,507.3c-1.5,0.5-2.1,2.1-1.5,4c0.6,1.9,2,3,3.4,2.5l0.1,0c1.4-0.4,2.2-1.9,1.6-4S67.2,506.9,65.8,507.3
      L65.8,507.3z M115.3,625.6l3,2.8l-3.5,3.9l-5.5-4.6l-2.7-3.9l19.6-13.5l3.6,5.3L115.3,625.6L115.3,625.6z M120.7,606.1
      c-0.5,2.4-2,4.9-5.6,7.4l-0.1,0c-6.1,4.2-12.7,4.4-16.9-1.7c-1.9-2.7-2.4-5.1-2.3-7.9l5.5-0.1c-0.1,1.8,0.1,3.3,1.2,4.9
      c1.6,2.3,4,2.3,6.7,0.8c-1.5-0.5-3.1-1.2-4.4-3.2c-2.3-3.4-2.2-7.9,1.6-10.6l0.1,0c4.4-3,9.4-1.3,12.3,2.9
      C120.7,601.4,121.1,603.8,120.7,606.1L120.7,606.1z M110.4,600.8L110.4,600.8c-1.4,1-1.8,2.8-0.7,4.5s2.9,1.9,4.3,1l0.1,0
      c1.4-1,1.8-2.8,0.6-4.5C113.6,600.1,111.8,599.8,110.4,600.8L110.4,600.8z M186.1,695l8.6,6.7l-3.4,4.3L177,694.9l3-3.9l19.7-8.4
      l5.7,4.4L186.1,695z M300.9,753l4.1,0.5l-0.5,5.2l-7.2-0.5l-4.5-1.6l8.1-22.4l6.1,2.2L300.9,753L300.9,753z M296.2,735l-4.4,3.2
      c-1.1-1.8-2.3-2.9-4.1-3.5c-2.5-0.9-4.5,0.4-5.9,3.1c1.5-0.7,3.4-0.8,5.3-0.1c4.3,1.6,6.5,5.4,4.9,9.7l0,0.1
      c-1.8,4.9-6.7,6.7-11.8,4.9c-3.2-1.2-4.8-2.8-5.9-5.1c-1-2.2-1.2-5.1,0.3-9.2l0-0.1c2.6-7.3,8-10.9,14.7-8.5
      C292.8,730.8,294.8,732.7,296.2,735L296.2,735z M279.8,743.2L279.8,743.2c-0.6,1.8,0.1,3.6,2.1,4.3c1.9,0.7,3.6-0.1,4.2-1.9l0-0.1
      c0.6-1.7-0.2-3.4-2.1-4.1C282,740.8,280.3,741.7,279.8,743.2L279.8,743.2z M411.4,754.4l-4.3,4c-1.6-1.8-3.4-2.8-5.5-2.9
      c-1.9-0.1-3.1,0.8-3.1,2.3l0,0.1c-0.1,1.5,1.3,2.5,3.8,2.6l2.8,0.1l0.8,3.4l-5.6,4.7l9,0.3l-0.2,5.3l-17.1-0.6l0.2-4.7l5.8-4.6
      c-3.3-0.9-6-2.9-5.9-6.9l0-0.1c0.2-4.8,4.1-7.7,9.4-7.5C406,750,409.2,751.8,411.4,754.4L411.4,754.4z M525.2,748.9l3.6-2l2.6,4.5
      l-6.1,3.7l-4.6,1.3l-6.4-22.9l6.2-1.7L525.2,748.9z M504.9,755l10.5-2.9l1.5,5.3l-17.5,4.9l-1.3-4.7l5-20.8l6.9-1.9L504.9,755z
       M605.8,704l3.7-10.5c0.9-2.6,1-4,0.2-5.2c-0.8-1.2-2.2-1.4-3.5-0.5c-1.3,0.9-1.9,2.3-2.2,5.1l-5.7-0.6c0.3-4.1,1.4-7,5.2-9.5
      c4.3-2.8,9-2.2,11.4,1.5l0,0.1c2.1,3.2,1.5,5.9,0,9.9l-1.8,4.6l8.1-5.4l2.9,4.4l-15.6,10.3L605.8,704z M677.4,622.9l-1.8,3.7
      l-4.7-2.2l2.8-6.6l3-3.7l18.5,14.9l-4,5L677.4,622.9z M694.5,624.6l-1.1-5.7c2.5-0.5,4.3-1.3,5.6-2.9c1.4-1.7,1.3-3.4,0-4.4
      l-0.1,0c-1.3-1.1-3-0.6-4.3,1c-0.9,1.1-1.3,2.4-1.4,3.7l-4.1,1.7l-8.9-8l9.9-12.3l4.2,3.4l-6.7,8.3l2.7,2.4
      c0.3-1.2,0.7-2.2,1.7-3.5c2.7-3.3,6.9-4.8,10.9-1.6h0.1c4.1,3.3,4,8.4,0.4,12.9C700.8,622.8,697.8,624.2,694.5,624.6L694.5,624.6z
       M511.5,47.3l-4.1-0.4l0.4-5.2L515,42l4.5,1.5l-7.4,22.6l-6.1-2L511.5,47.3z M607.4,91.1l-3.8-1.6l2-4.8l6.7,2.5l3.8,2.8l-14,19.2
      l-5.2-3.8L607.4,91.1z M608.6,105.8L608.6,105.8c1.7-2.4,4-2.9,6.6-2.2c-0.9-1.9-1.1-4,0.4-6l0-0.1c2.2-3,6.8-3.2,11.1-0.1
      c4.3,3.1,5.5,7.5,3.3,10.6l0,0.1c-1.5,2.1-3.6,2.5-5.6,2.2c1.3,2.3,1.7,4.6-0.1,6.9l0,0.1c-2.5,3.4-7.4,3.2-11.9-0.1
      C607.7,113.8,606.1,109.1,608.6,105.8L608.6,105.8z M619.5,113L619.5,113c0.9-1.3,0.4-3-1.2-4.1c-1.6-1.2-3.4-1.2-4.3,0.1l0,0.1
      c-0.8,1.1-0.6,2.9,1.2,4.2C617,114.5,618.7,114.2,619.5,113L619.5,113z M624.7,105.1L624.7,105.1c0.8-1.1,0.6-2.7-0.8-3.8
      c-1.4-1.1-3-0.8-3.8,0.3l0,0.1c-0.9,1.2-0.6,2.8,0.8,3.8C622.2,106.5,623.8,106.3,624.7,105.1L624.7,105.1z M690.7,187.3L684,178
      l3.1-3.6l19,1.4l3.9,5.4l-11.6,8.4l1.8,2.4l-4,2.9l-1.8-2.4l-3.7,2.7l-3.7-5.1L690.7,187.3z M694.6,184.5l5.5-4l-8.8-0.6
      L694.6,184.5z M746.7,258.1l-2.2-3.4l4.4-2.9l4.2,5.9l1.6,4.5l-22.4,8L730,264L746.7,258.1z M736.6,271.6l5.3,2.5
      c-1.1,2.2-1.4,4.2-0.7,6.2c0.6,1.7,1.9,2.5,3.3,2.1l0.1,0c1.4-0.5,1.8-2.1,1-4.4l-0.9-2.6l2.9-2l6.4,3.5l-3-8.5l5-1.8l5.7,16.1
      l-4.4,1.6l-6.4-3.7c0.4,3.4-0.4,6.6-4.2,8l-0.1,0c-4.5,1.6-8.7-1-10.4-6C734.5,278.2,735,274.6,736.6,271.6L736.6,271.6z
       M758.9,381.4c1.7-1.8,4.4-2.9,8.8-3l0.1,0c7.4-0.1,13,3.4,13.1,10.8c0,3.3-0.9,5.6-2.5,7.9l-4.7-3c1.1-1.5,1.8-2.8,1.7-4.7
      c0-2.8-2.1-4.1-5.1-4.4c1,1.2,1.9,2.7,1.9,5.1c0,4.1-2.5,7.8-7.3,7.9H765c-5.3,0.1-8.5-4.1-8.6-9.3
      C756.3,385.4,757.3,383.2,758.9,381.4L758.9,381.4z M764.5,391.6L764.5,391.6c1.8,0,3.1-1.3,3.1-3.4c0-2.1-1.3-3.3-3-3.2h-0.1
      c-1.7,0-3.1,1.3-3,3.4C761.4,390.4,762.7,391.6,764.5,391.6L764.5,391.6z M740.3,507.9L740,512l-5.2-0.3l0.1-7.2l1.4-4.5l22.7,6.9
      l-1.9,6.2L740.3,507.9z M749,500L749,500c-6.5-2-10.6-7.7-8.6-14.1c2-6.4,8.5-8.8,14.9-6.9l0.1,0c6.4,1.9,10.5,7.6,8.5,14.1
      C761.8,499.6,755.3,502,749,500L749,500z M753.4,485.4L753.4,485.4c-3.6-1.1-6.8-0.2-7.5,2.3c-0.8,2.5,1.3,4.9,4.9,6l0.1,0
      c3.6,1.1,6.7,0.2,7.5-2.3C759.1,488.9,757,486.5,753.4,485.4L753.4,485.4z"/>
  </g>
</g>
</svg>
</div>


  </div>
  <script>

    var socket = io();
    var app = feathers()
      .configure(feathers.hooks())
      .configure(feathers.socketio(socket));

    var matches = app.service('matches');
    var shots = app.service('matches/:match_id/shots');

    $("#dartboard #areas g").children().hover(
      function(){
        $(this).css("opacity","0.6");
      },
      function(){
        $(this).css("opacity","1");
      }
    )

    $("#dartboard #areas g").children().on('click', function() {
      var score = $(this).attr('id')
      if (score == 'Bull') {
        vm.updateCurrentPlayerScore(50, true);
      } else if (score == 'Outer') {
        vm.updateCurrentPlayerScore(25);
      } else if (score == 'Missed') {
        vm.updateCurrentPlayerScore(0);
      }  else {
        var multiplier = score.substring(0,1);
        if (multiplier == 'd') {
          vm.updateCurrentPlayerScore(score.substring(1,3) * 2, true);
        } else if (multiplier == 't') {
          vm.updateCurrentPlayerScore(score.substring(1,3) * 3, false);
        } else {
          vm.updateCurrentPlayerScore(score.substring(1,3), false);
        }
      }
    });

    var vm = new Vue({
      el: '#app',
      data: {
        player_one_name: '',
        player_two_name: '',
        players: [],
        starting_point: 301,
        id: '',
        current_player: 0,
        shots: 3,
        round: 1,
        current_round: [],
        message: '',
        game_started: false,
        game_finished: false
      },
      ready: function() {

      },
      methods: {
        createGame: function() {
          this.players.push({
            name: this.player_one_name,
            score: this.starting_point,
            history: []
          });

          this.players.push({
            name: this.player_two_name,
            score: this.starting_point,
            history: []
          });

          this.game_started = true;
        },
        updateCurrentPlayerScore: function(score, double) {
          const currentPlayer = this.players[this.current_player];
          const updatedScore = currentPlayer.score - score;

          vm.current_round.push(currentPlayer.score);
          console.log(updatedScore);
          if (vm.checkBust(updatedScore, double)) {
            console.log('hi');
            currentPlayer.score = updatedScore;
            vm.shots--;
            if (vm.shots == 0) {
              console.log('i ran > deeper');
              vm.updatePlayerHistory(updatedScore);
              vm.resetCurrentRound();
              vm.endTurn()
            }
          } else {
            currentPlayer.score = vm.current_round[0];
            vm.endTurn();
          }
        },
        swapCurrentPlayer: function() {
          console.log('swapping player');
          if (this.current_player == 0){
            this.current_player = 1
          } else {
            this.current_player = 0
          }
        },
        resetShots: function() {
          this.shots = 3;
        },
        resetCurrentRound: function() {
          this.current_round = [];
        },
        incrementRound: function() {
          this.round++;
        },
        updatePlayerHistory: function(values) {
          const currentPlayer = this.players[this.current_player];

          if (Object.prototype.toString.call( values ) === '[object Array]') {
            currentPlayer.history = currentPlayer.history.concat(values);
          } else {
            currentPlayer.history.push(values);
          }
        },
        endTurn: function() {
          vm.resetShots();
          vm.incrementRound();
          vm.swapCurrentPlayer();
          vm.resetCurrentRound();
        },
        checkBust: function(score, double) {
          if (score == 1 || score < 0) {
            console.log('You finished on 1 or went past 0');
            return false;
          } else if (score == 0 && double) {
            console.log('You won!');
            vm.updatePlayerHistory(vm.current_round);
            vm.updatePlayerHistory(score);
            vm.resetCurrentRound();
            vm.game_finished = true;
            vm.message = this.players[this.current_player].name + ' won!';
            return true;
          } else if (score == 0) {
            console.log('You hit 0 without a double.');
            return false;
          } else {
            return true;
          }
        }
      }
    })

    matches.on('patched', function(match) {
      console.log('patched');
      if (match._id == vm.id) {
        vm.players = match.players;
      }
    });

    matches.on('created', function(match) {
      apiMatches.push(match);
    });

  </script>
  </body>
</html>
